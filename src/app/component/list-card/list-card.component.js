"use strict";var __decorate=this&&this.__decorate||function(t,e,r,o){var a,i=arguments.length,n=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(n=(i<3?a(n):3<i?a(e,r,n):a(e,r))||n);return 3<i&&n&&Object.defineProperty(e,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),app_data_path_const_1=require("../../data/app-data-path.const"),ListCardComponent=function(){function t(t,e,r){this.listCardService=t,this.toolFunction=e,this.routerEvent=r,this.targetPos=this.listCardService.targetPos,this.transformNumber=null,this.anmation=null,this.target=null,this.pathData=app_data_path_const_1.pathData,this.onCardClickId=null,this.imgTrans=null}return t.prototype.startSetPos=function(t){if(!this.onCardClickId&&0!==this.onCardClickId){if(!this.toolFunction.DETECTOR.isDesktopDevice)return;this.listCardService.getTargetPos(t),this.setTarget(t.target),this.setDOMTransform(t)}},t.prototype.stopSetPos=function(){this.toolFunction.DETECTOR.isDesktopDevice&&(this.listCardService.reset(),this.transformNumber=null,this.anmation&&(clearInterval(this.anmation),this.anmation=null),this.target&&(this.target.img.style.transform="",this.target.text.style.transform="",this.target.bor.style.transform="",this.target=null))},t.prototype.getTransformNumber=function(t){this.toolFunction.DETECTOR.isDesktopDevice&&(this.transformNumber=this.listCardService.getTransformNumber(t))},t.prototype.setTarget=function(t){this.target={target:t,img:t.querySelector(".img-content"),bor:t.querySelector(".img-border"),text:t.querySelector(".info-text-content")}},t.prototype.setDOMTransform=function(t){var s=this;t&&(this.anmation=setInterval(function(){if(s.transformNumber){var t=.2,e=s.imgTrans=s.toolFunction.getTransform(s.target.img),r=s.toolFunction.getTransform(s.target.bor),o=s.toolFunction.getTransform(s.target.text),a="rotateX("+(e.rotateX+(2*s.transformNumber.rotateX-e.rotateX)*t)+"deg) rotateY("+(e.rotateY+(2*s.transformNumber.rotateY-e.rotateY)*t)+"deg)",i="rotateX("+(r.rotateX+(1.5*s.transformNumber.rotateX-r.rotateX)*t)+"deg) rotateY("+(r.rotateY+(1.5*s.transformNumber.rotateY-r.rotateY)*t)+"deg)",n="rotateX("+(o.rotateX+(1*s.transformNumber.rotateX-o.rotateX)*t)+"deg) rotateY("+(o.rotateY+(1*s.transformNumber.rotateY-o.rotateY)*t)+"deg)";s.target.img.style.transform=a,s.target.bor.style.transform=i,s.target.text.style.transform=n}},60))},t.prototype.onClick=function(t,e,r,o){var a=this,i=this.toolFunction.DETECTOR.isDesktopDevice;i||this.setTarget(this.listCardUl.nativeElement.querySelectorAll(".list-card-li")[e]);var n=this.target.target.querySelector(".link-content"),s=this.target.img,l=this.target.target,c=n.getBoundingClientRect();this.stopSetPos(),l.style.height=this.toolFunction.getStyle(l,"height"),n.style.width=c.width+"px",n.style.height=c.height+"px",n.style.top=c.top+"px",n.style.left=c.left+"px",n.style.position="fixed";var h=i?parseInt(this.imgTrans.rotateX):1,p=i?parseInt(this.imgTrans.rotateY):1;h=0-h/Math.abs(h),p=0-p/Math.abs(p),s.style.transformOrigin=0<h?"50% 100%":"50% 0%",setTimeout(function(){a.onCardClickId=e,n.style.top="0",n.style.left="0",n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",s.style.transform="rotateX("+15*h+"deg) rotateY("+5*p+"deg) translateY("+-10*h+"px)",setTimeout(function(){s.style.transform="rotateX(0deg) rotateY(0deg) translateY(0)"},300),setTimeout(function(){a.linkClick(r,o)},500)},10)},t.prototype.linkClick=function(t,e){this.routerEvent.linkClick(t,e,!1)},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.stopSetPos()},__decorate([core_1.Input()],t.prototype,"data",void 0),__decorate([core_1.ViewChild("listCardUl",{static:!1})],t.prototype,"listCardUl",void 0),t=__decorate([core_1.Component({selector:"app-list-card",templateUrl:"./list-card.component.html",styleUrls:["./list-card.component.scss"]})],t)}();exports.ListCardComponent=ListCardComponent;